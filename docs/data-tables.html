<div id="DataTables" class="bg-white pt-16">
    <div class="p-2 mt-3 text-4xl text-white bg-orange-500 shadow rounded">
        <span class="pl-2">Data Tables</span>
    </div>

    <div class="md:mx-2 lg:mx-4 p-2 text-left text-black">
        <p>
            Carnival contains a DataTable class with two sub-classes, MappedDataTable and GenericDataTable.
            MappedDataTable is like a database table with a primary key. The value of the primary key field of each row
            is enforced to be unique within the scope of the data table. GenericDataTable is like a database table with
            no primary key. For data interchange, it is safer to use MappedDataTable, assuming your data set has a
            primary key. If there is no primary key, use GenericDataTable.
        </p>

        <div class="text-3xl text-bold text-black my-3">MappedDataTable</div>

        <div class="listingblock my-3">
            <div class="mb-1 text-bold italic font-serif text-sm">Example: Mapped data table</div>
            <div class="content">
                <pre
                    class="highlightjs highlight"
                ><code class="language-groovy" data-lang="groovy">@Grab(group='edu.upenn.pmbb', module='carnival-util', version='0.2.6') <i class="conum" data-value="1"></i><b>(1)</b>

import carnival.util.MappedDataTable

def mdt = new MappedDataTable(
  name:"myMappedDataTable", <i class="conum" data-value="2"></i><b>(2)</b>
  idFieldName:'ID' <i class="conum" data-value="3"></i><b>(3)</b>
)
mdt.dataAdd(ID:'1A', NAME:'alex') <i class="conum" data-value="4"></i><b>(4)</b>

def currentDir = new File(System.getProperty("user.dir"))
mdt.writeFiles(currentDir)<i class="conum" data-value="5"></i><b>(5)</b></code></pre>

                <div class="colist arabic">
                    <table>
                        <tr>
                            <td><i class="conum" data-value="1"></i><b>1</b></td>
                            <td>Use <code>@Grab</code> to incorporate the carnival-util dependency.</td>
                        </tr>
                        <tr>
                            <td><i class="conum" data-value="2"></i><b>2</b></td>
                            <td>All data tables have a name, which will be used to name file representations.</td>
                        </tr>
                        <tr>
                            <td><i class="conum" data-value="3"></i><b>3</b></td>
                            <td>Set the name of the identifier field of this data table to 'ID'</td>
                        </tr>
                        <tr>
                            <td><i class="conum" data-value="4"></i><b>4</b></td>
                            <td>Add a record to the data table.</td>
                        </tr>
                        <tr>
                            <td><i class="conum" data-value="5"></i><b>5</b></td>
                            <td>Write the file representation of this data table to the current directory.</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <p>The result of this script will be two files in the current directory:</p>
        <ul>
            <li>myMappedDataTable.yaml - data descriptor</li>
            <li>myMappedDataTable.csv - the data in comma separated value format</li>
        </ul>

        <p>As noted above, mapped data tables have a primary key, which is enforced to be unique.</p>

        <div class="listingblock my-3">
            <div class="mb-1 text-bold italic font-serif text-sm">Example: Non-unique identifiers</div>
            <div class="content">
                <pre
                    class="highlightjs highlight"
                ><code class="language-groovy" data-lang="groovy">@Grab(group='edu.upenn.pmbb', module='carnival-util', version='0.2.6')

import carnival.util.MappedDataTable

def mdt = new MappedDataTable(
    name:"myMappedDataTable",
    idFieldName:'ID'
)
mdt.dataAdd(ID:'1A', NAME:'alex')
mdt.dataAdd(ID:'1A', NAME:'bob') <i class="conum" data-value="1"></i><b>(1)</b></code></pre>

                <div class="colist arabic">
                    <table>
                        <tr>
                            <td><i class="conum" data-value="1"></i><b>1</b></td>
                            <td>
                                This line will cause an exception, since the ID '1A' was already added to the data
                                table.
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <span class="text-3xl text-bold text-black mt-2">GenericDataTable</span>

        <p>Generic data tables can hold arbitrary tabular data.</p>

        <div class="listingblock my-3">
            <div class="mb-1 text-bold italic font-serif text-sm">docs/groovy/basic/generic-data-table-1.groovy</div>
            <div class="content">
                <pre
                    class="highlightjs highlight"
                ><code class="language-groovy" data-lang="groovy">@Grab(group='edu.upenn.pmbb', module='carnival-util', version='0.2.6')

import carnival.util.GenericDataTable

def mdt = new GenericDataTable(
    name:"myMappedDataTable" <i class="conum" data-value="1"></i><b>(1)</b>
)
mdt.dataAdd(ID:'1A', NAME:'alex')
mdt.dataAdd(ID:'1A', NAME:'bob') <i class="conum" data-value="2"></i><b>(2)</b>

def currentDir = new File(System.getProperty("user.dir"))
mdt.writeFiles(currentDir)</code></pre>

                <div class="colist arabic">
                    <table>
                        <tr>
                            <td><i class="conum" data-value="1"></i><b>1</b></td>
                            <td>The only required parameter to the GenericDataTable constructor is name.</td>
                        </tr>
                        <tr>
                            <td><i class="conum" data-value="2"></i><b>2</b></td>
                            <td>This will not throw an error. The ID column has no special meaning here.</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
